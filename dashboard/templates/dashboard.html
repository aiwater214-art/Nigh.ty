{% extends "base.html" %}
{% block content %}
<div class="level">
  <div class="level-left">
    <div>
      <h1 class="title">Welcome, {{ user.full_name or user.username }}!</h1>
      <p class="subtitle">You joined on {{ user.created_at.strftime('%Y-%m-%d') }}</p>
    </div>
  </div>
  <div class="level-right">
    <a class="button is-light" href="/dashboard/logout">Log out</a>
  </div>
</div>

<div class="columns">
  <div class="column">
    <div class="box">
      <h2 class="title is-5">Your Stats</h2>
      {% if stats %}
      <ul>
        <li><strong>Cells eaten:</strong> {{ stats.cells_eaten }}</li>
        <li><strong>Food eaten:</strong> {{ stats.food_eaten }}</li>
        <li><strong>Worlds explored:</strong> {{ stats.worlds_explored }}</li>
        <li><strong>Sessions played:</strong> {{ stats.sessions_played }}</li>
      </ul>
      {% else %}
      <p>No stats available yet.</p>
      {% endif %}
    </div>
  </div>
  <div class="column">
    <div class="box">
      <h2 class="title is-5">Global Metrics</h2>
      <ul>
        <li><strong>Cells eaten:</strong> {{ totals.cells_eaten }}</li>
        <li><strong>Food eaten:</strong> {{ totals.food_eaten }}</li>
        <li><strong>Worlds explored:</strong> {{ totals.worlds_explored }}</li>
        <li><strong>Sessions played:</strong> {{ totals.sessions_played }}</li>
      </ul>
    </div>
  </div>
</div>

<div class="box">
  <h2 class="title is-5">Worlds</h2>
  {% if worlds %}
  <table class="table is-fullwidth">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Active players</th>
        <th>Created at</th>
      </tr>
    </thead>
    <tbody>
      {% for world in worlds %}
      <tr>
        <td>{{ world.name }}</td>
        <td>{{ world.description }}</td>
        <td>{{ world.active_players }}</td>
        <td>{{ world.created_at.strftime('%Y-%m-%d') }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No worlds registered yet.</p>
  {% endif %}
</div>
{% endblock %}
